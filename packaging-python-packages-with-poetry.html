
<!DOCTYPE html>
<html lang="english">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />     <meta name="robots" content="" />     <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro|Source+Sans+Pro:300,400,400i,700" rel="stylesheet">     <link rel="stylesheet" type="text/css" href="https://jackmckew.dev/theme/stylesheet/style.min.css"> 
    <link rel="stylesheet" type="text/css" href="https://jackmckew.dev/theme/pygments/github.min.css">
    <link rel="stylesheet" type="text/css" href="https://jackmckew.dev/theme/font-awesome/css/fontawesome.css">
    <link rel="stylesheet" type="text/css" href="https://jackmckew.dev/theme/font-awesome/css/brands.css">
    <link rel="stylesheet" type="text/css" href="https://jackmckew.dev/theme/font-awesome/css/solid.css">
    <link rel="stylesheet" type="text/css" href="https://jackmckew.dev/theme/font-awesome.css">     <script src="https://jackmckew.dev/theme/tipuesearch/jquery.min.js"></script>
    <script src="https://jackmckew.dev/theme/tipuesearch/tipuesearch.min.js"></script>
    <script src="https://jackmckew.dev/theme/tipuesearch/tipuesearch.js"></script>
    <script src="https://jackmckew.dev/theme/tipuesearch/tipuesearch_set.js"></script>
    <link rel="stylesheet" href="https://jackmckew.dev/theme/tipuesearch/tipuesearch.css" />
    <script src="https://jackmckew.dev/tipuesearch_content.js"></script>
    <link href="https://jackmckew.dev/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jack McKew's Blog Atom">     <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon"> <!-- Google Analytics -->
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-131173168-2', 'auto');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics --><meta name="author" content="Jack McKew" />
<meta name="description" content="Packaging Python code to easily share code with others! Building upon a previous post on &#34;How many words have I written in this blog?&#34;, let&#39;s dive into how to share this code with other on PyPI and integrate into this website with a &#39;word ticker&#39; which updates whenever a new â€¦" />
<meta name="keywords" content="python">


<meta property="og:site_name" content="Jack McKew's Blog"/>
<meta property="og:title" content="Packaging Python Packages with Poetry"/>
<meta property="og:description" content="Packaging Python code to easily share code with others! Building upon a previous post on &#34;How many words have I written in this blog?&#34;, let&#39;s dive into how to share this code with other on PyPI and integrate into this website with a &#39;word ticker&#39; which updates whenever a new â€¦"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://jackmckew.dev/packaging-python-packages-with-poetry.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2020-03-25 00:00:00+11:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://jackmckew.dev/author/jack-mckew.html">
<meta property="article:section" content="Python"/>
<meta property="article:tag" content="python"/>
<meta property="og:image" content="/jm-photo.jpg">

    <title>Jack McKew's Blog &ndash; Packaging Python Packages with Poetry</title>

    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-1052275056735196"
     crossorigin="anonymous"></script>
    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
        (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-1052275056735196",
            enable_page_level_ads: true
        });
    </script>
</head>

<body>
    <aside>
        <div>
            <a href="https://jackmckew.dev">
        <img src="/jm-photo.jpg" alt="Jack McKew's Blog" title="Jack McKew's Blog">
      </a>
            <h1><a href="https://jackmckew.dev">Jack McKew's Blog</a></h1>

            <p>Engineer | Software Developer | Data Scientist</p>            <p>Number of Posts: 99</p>
            <p>Number of Words: 73,501</p>
            <p>Number of Lines of Code 4,552</p>
            <form class="navbar-search" action="/search.html" role="search">
                <input type="text" name="q" id="tipue_search_input" placeholder="Search..">
            </form>
            <style>
                .bmc-button img {
                    height: 34px !important;
                    width: 35px !important;
                    margin-bottom: 1px !important;
                    box-shadow: none !important;
                    border: none !important;
                    vertical-align: middle !important;
                }
                
                .bmc-button {
                    margin-top: 15px !important;
                    margin-bottom: 20px !important;
                    padding: 7px 15px 7px 10px !important;
                    line-height: 35px !important;
                    height: 51px !important;
                    text-decoration: none !important;
                    display: inline-flex !important;
                    color: #ffffff !important;
                    /* background-color: #FF813F !important; */
                    border-radius: 5px !important;
                    border: 1px solid transparent !important;
                    padding: 7px 15px 7px 10px !important;
                    font-size: 22px !important;
                    letter-spacing: 0.6px !important;
                    box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;
                    -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
                    font-family: 'Cookie', cursive !important;
                    -webkit-box-sizing: border-box !important;
                    box-sizing: border-box !important;
                }
                
                .bmc-button:hover,
                .bmc-button:active,
                .bmc-button:focus {
                    -webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
                    text-decoration: none !important;
                    box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;
                    opacity: 0.85 !important;
                    color: #ffffff !important;
                }
            </style>
            <link href="https://fonts.googleapis.com/css?family=Cookie" rel="stylesheet">
            <a class="bmc-button btn" target="_blank" href="https://www.buymeacoffee.com/jackmckew"><img src="https://jackmckew.dev/theme/img/pizza.png" alt="ðŸ•"><span style="margin-left:5px;font-size:28px !important;">Buy me a Pizza</span></a>
            <br>
            <a href="https://feedburner.google.com/fb/a/mailverify?uri=JackMckewsBlog&amp;loc=en_US" class="mbscreenphone phonelink btn btn-info btn-lg">
                Subscribe by Email <i class="fas fa-envelope"></i>
              </a>             <nav>
                <ul class="list">
                    <li><a target="_blank" href="https://jackmckew.dev/pages/contact.html#contact">Contact</a></li>
                    <li><a target="_blank" href="https://jackmckew.dev/pages/cv-professional.html#cv-professional">CV/Professional</a></li>
                </ul>
            </nav>

            <ul class="social">
                <li>
                    <a  class="sc-twitter" href="https://twitter.com/Jac_McQ" target="_blank">
                        <i class="fab fa-twitter">
            </i>
                    </a>
                </li>
                <li>
                    <a  class="sc-linkedin" href="https://www.linkedin.com/in/jack-mckew/" target="_blank">
                        <i class="fab fa-linkedin">
            </i>
                    </a>
                </li>
                <li>
                    <a  class="sc-github" href="https://github.com/JackMcKew" target="_blank">
                        <i class="fab fa-github">
            </i>
                    </a>
                </li>
            </ul>
        </div>

        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle ads-aside" data-ad-client="ca-pub-1052275056735196" data-ad-slot="1234561"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>

    </aside>
    <main>
        <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <ins class="adsbygoogle ads-responsive" data-ad-client="ca-pub-1052275056735196" data-ad-slot="1234562"></ins>
        <script>
            (adsbygoogle = window.adsbygoogle || []).push({});
        </script>
        <nav>
            <a href="https://jackmckew.dev"> Home</a>             <a href="/archives.html">Archives</a>             <a href="/categories.html">Categories</a>             <a href="/tags.html">Tags</a>             <a href="/sitemap.xml">Sitemap</a>             <a href="https://jackmckew.dev/feeds/all.atom.xml"> Atom</a>         </nav>
<article class="single">
  <header>
      
    <h1 id="packaging-python-packages-with-poetry">Packaging Python Packages with Poetry</h1>
    <p>
       Posted on Wed 25 March 2020 in <a href="https://jackmckew.dev/category/python.html">Python</a>

        &#8226; 6 min read
    </p>
  </header>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="ca-pub-1052275056735196"
         data-ad-slot="1234565"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

  <div>
    <body><p><strong>Packaging Python code to easily share code with others!</strong></p>
<p>Building upon a previous post on <a href="https://jackmckew.dev/counting-words-with-python.html">"How many words have I written in this blog?"</a>, let's dive into how to share this code with other on <a href="https://pypi.org/">PyPI</a> and integrate into this website with a 'word ticker' which updates whenever a new post is uploaded.</p>
<ul>
<li><a href="#what-is-poetry">What is Poetry</a></li>
<li><a href="#package-structure">Package Structure</a><ul>
<li><a href="#initpy-files"><code>__init__.py</code> Files</a></li>
</ul>
</li>
<li><a href="#wordsum---my-first-package">Wordsum - My First Package</a><ul>
<li><a href="#wordsum-package-structure">Wordsum Package Structure</a></li>
<li><a href="#user-interaction">User Interaction</a></li>
<li><a href="#publishing-to-pypi">Publishing to PyPI</a></li>
</ul>
</li>
<li><a href="#integrating-wordsum-into-this-website">Integrating Wordsum Into This Website</a><ul>
<li><a href="#update-requirementstxt">Update <code>requirements.txt</code></a></li>
<li><a href="#update-pelicanconfpy">Update <code>pelicanconf.py</code></a></li>
<li><a href="#update-basehtml">Update <code>base.html</code></a></li>
</ul>
</li>
</ul>
<p>If you are using Python, you've most likely used pip, conda or similar to install packages from other developers such that you aren't reinventing the wheel. This functionality is by far one of my favourite features of the language. If you aren't already aware, (most) of these packages you install with pip live on <a href="https://pypi.org/">PyPI</a>, the Python Package Index.</p>
<p>This post is for how to structure a package in Python with <a href="https://python-poetry.org/">Poetry</a> and publish it on <a href="https://pypi.org/">PyPI</a> (I was amazed how easy this was).</p>
<h2 id="what-is-poetry">What is Poetry</h2>
<p>A quote from the creator of <a href="https://python-poetry.org/">Poetry</a>:</p>
<blockquote>
<p>I built Poetry because I wanted a single tool to manage my Python projects from start to finish. I wanted something reliable and intuitive that the community could use and enjoy. - SÃ©bastien Eustace</p>
</blockquote>
<p>In it's essence, <a href="https://python-poetry.org/">Poetry</a> manages the Python project workflow so you don't have to.</p>
<p>Same as venv, virtualenv, conda create virtual environments for a project, <a href="https://python-poetry.org/">Poetry</a> will also create a virtual environment to go with your project.</p>
<blockquote>
<p>If you are working in VS Code, the <a href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">Python extension</a> doesn't automatically detect the virtual environment location that Poetry defaults to. To tell VS Code where the virtual environments live for Poetry head to <code>Settings &gt; python.venvFolders</code> and add <code>C:\\Users\\USERNAME\\AppData\\Local\\pypoetry\\Cache\\virtualenvs</code> for Windows.</p>
</blockquote>
<h2 id="package-structure">Package Structure</h2>
<p>Python packages require a standard structure (albeit lenient), which <a href="https://python-poetry.org/">Poetry</a> sets up for you when a project is initialized.  If we run <code>poetry new test_package</code> we will end up with the structure:</p>
<table class="table highlighttable table-striped"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>test-package
+-- pyproject.toml
+-- README.rst
+-- test_package
<span class="p">|</span>   +-- __init__.py
+-- tests
<span class="p">|</span>   +-- __init__.py
<span class="p">|</span>   +-- test_test_package.py
</code></pre></div>
</td></tr></tbody></table>
<p>Inside the top directory of our package we have 2 folders and 2 files.</p>
<table class="table table-striped">
<thead>
<tr>
<th>File</th>
<th>Use</th>
</tr>
</thead>
<tbody>
<tr>
<td>pyproject.toml</td>
<td>Contains all the information about your package, dependancies, versions, etc.</td>
</tr>
<tr>
<td>README.rst</td>
<td>Readme file as to what the project does, any instructions of use, etc (see <a href="https://github.com/PatrikHlobil/Pandas-Bokeh">Pandas-Bokeh</a> for a great example).</td>
</tr>
<tr>
<td>test_package</td>
<td>This is where all our Python code will live for the project.</td>
</tr>
<tr>
<td>tests</td>
<td>Following test driven development, this is where any automated tests live to make sure the code runs as expected.</td>
</tr>
</tbody>
</table>
<h3 id="__init__py-files"><code>__init__.py</code> Files</h3>
<p>What are all these <code>__init__.py</code> files and what are they there for? To be able to import code from another folder, Python requires to see an <code>__init__.py</code> inside a folder to mark it as a package.</p>
<p>If we create a function inside our test_package folder:</p>
<table class="table highlighttable table-striped"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>+-- test_package
<span class="p">|</span>   +-- __init__.py
<span class="p">|</span>   +-- <span class="k">function</span>.py
</code></pre></div>
</td></tr></tbody></table>
<p>Now users can use:
<code>import test_package.function</code></p>
<p>or</p>
<p><code>from test_package import function</code></p>
<h2 id="wordsum-my-first-package">Wordsum - My First Package</h2>
<p>If you have read this blog previously, I did a post on answering the question "How many words have I written in this blog?" which you can reach at: <a href="https://jackmckew.dev/counting-words-with-python.html">https://jackmckew.dev/counting-words-with-python.html</a>.</p>
<p>This was great, I had wrote 2 functions which count how many words were inside markdown files &amp; Jupyter notebooks. Following this, I had a great idea, why not make a 'ticker' of how many words have been written in this blog and display this on the website. Making sure that whenever a new post is added the 'word ticker' increments by how many words were in that post.</p>
<p>This in the inspiration behind <a href="https://github.com/JackMcKew/wordsum">Wordsum</a> which is also available on <a href="https://pypi.org/project/wordsum/">PyPI</a>. Meaning you can install it with:</p>
<table class="table highlighttable table-striped"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>pip install wordsum
</code></pre></div>
</td></tr></tbody></table>
<h3 id="wordsum-package-structure">Wordsum Package Structure</h3>
<p>To make the two functions more extensible, the two functions were further broken into smaller functions and contained in their own 'internal' package (folder).</p>
<p>The basic structure we ended up with was:</p>
<table class="table highlighttable table-striped"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>wordsum
+-- word_sum.py
+-- __init__.py
+-- _file_types
<span class="p">|</span>   +-- __init__.py
<span class="p">|</span>   +-- jupyter.py
<span class="p">|</span>   +-- markdown.py
+-- _io
<span class="p">|</span>   +-- __init__.py
<span class="p">|</span>   +-- read_files.py
+-- _util
<span class="p">|</span>   +-- __init__.py
<span class="p">|</span>   +-- file_locate.py
</code></pre></div>
</td></tr></tbody></table>
<p>Now the <code>_</code> prefix to the folders is to nominate that functions contained in these folders are internal to the package. Meaning the user shouldn't be able to access these functions.</p>
<p>The main functions of the package are kept within <code>word_sum.py</code> (which uses the functions in the <code>_xxx</code> folders).</p>
<h3 id="user-interaction">User Interaction</h3>
<p>To make the main functions within <code>word_sum.py</code> accessible to users of the package we can import them in the 'top' <code>__init__.py</code> of the wordsum package.</p>
<table class="table highlighttable table-striped"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="n">__version__</span> <span class="o">=</span> <span class="s1">'0.1.3'</span>

<span class="kn">from</span> <span class="nn">wordsum.word_sum</span> <span class="kn">import</span> <span class="n">count_words</span>
<span class="kn">from</span> <span class="nn">wordsum.word_sum</span> <span class="kn">import</span> <span class="n">list_supported_formats</span>
<span class="kn">from</span> <span class="nn">wordsum.word_sum</span> <span class="kn">import</span> <span class="n">count_files</span>
</code></pre></div>
</td></tr></tbody></table>
<p>This will allow users to interact with the package like:</p>
<table class="table highlighttable table-striped"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">wordsum</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">wordsum</span><span class="o">.</span><span class="n">count_words</span><span class="p">(</span><span class="s1">'./example_files'</span><span class="p">,[</span><span class="s1">'.md'</span><span class="p">,</span><span class="s1">'.ipynb'</span><span class="p">]))</span>
    <span class="n">wordsum</span><span class="o">.</span><span class="n">list_supported_formats</span><span class="p">()</span>
</code></pre></div>
</td></tr></tbody></table>
<h3 id="publishing-to-pypi">Publishing to PyPI</h3>
<p>Since we've used Poetry with the development of this package, our <code>pyproject.toml</code> should be a bit more fleshed out. Wordsum's <code>pyproject.toml</code> ended up as:</p>
<table class="table highlighttable table-striped"><tbody><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="k">[tool.poetry]</span>
<span class="na">name</span> <span class="o">=</span> <span class="s">"wordsum"</span>
<span class="na">version</span> <span class="o">=</span> <span class="s">"0.1.3"</span>
<span class="na">description</span> <span class="o">=</span> <span class="s">"Counting words within a folder of files recursively."</span>
<span class="na">readme</span> <span class="o">=</span> <span class="s">"README.md"</span>
<span class="na">repository</span> <span class="o">=</span> <span class="s">"https://github.com/JackMcKew/wordsum"</span>
<span class="na">authors</span> <span class="o">=</span> <span class="s">["JackMcKew &lt;jackmckew2@gmail.com&gt;"]</span>

<span class="k">[tool.poetry.dependencies]</span>
<span class="na">python</span> <span class="o">=</span> <span class="s">"^3.6"</span>
<span class="na">mypy</span> <span class="o">=</span> <span class="s">"^0.770"</span>
<span class="na">nbformat</span> <span class="o">=</span> <span class="s">"^5.0.4"</span>
<span class="na">black</span> <span class="o">=</span> <span class="s">"^19.10b0"</span>
<span class="na">flake8</span> <span class="o">=</span> <span class="s">"^3.7.9"</span>

<span class="k">[tool.poetry.dev-dependencies]</span>
<span class="na">pytest</span> <span class="o">=</span> <span class="s">"^5.2"</span>
<span class="na">black</span> <span class="o">=</span> <span class="s">{version = "^19.10b0", allow-prereleases = true}</span>

<span class="k">[tool.poetry.urls]</span>
<span class="na">issues</span> <span class="o">=</span> <span class="s">"https://github.com/JackMcKew/wordsum/issues"</span>

<span class="k">[build-system]</span>
<span class="na">requires</span> <span class="o">=</span> <span class="s">["poetry&gt;=0.12"]</span>
<span class="na">build-backend</span> <span class="o">=</span> <span class="s">"poetry.masonry.api"</span>
</code></pre></div>
</td></tr></tbody></table>
<p>All that is left to do is to sign up for an account on PyPI and run:</p>
<table class="table highlighttable table-striped"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>poetry publish
</code></pre></div>
</td></tr></tbody></table>
<p>This will ask for your PyPI credentials, build the package (a step done by <code>setuptools</code> previously) and upload the package for you.</p>
<p>Now users can install your package with:</p>
<table class="table highlighttable table-striped"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>pip install wordsum
</code></pre></div>
</td></tr></tbody></table>
<h2 id="integrating-wordsum-into-this-website">Integrating Wordsum Into This Website</h2>
<p>Previously I've written a blog post on how I moved from Wordpress to Pelican (<a href="https://jackmckew.dev/migrating-from-wordpress-to-pelican.html">https://jackmckew.dev/migrating-from-wordpress-to-pelican.html</a>). This goes into detail about how this site utilizes a continuous integration (CI) service (TravisCI), that rebuilds the site each time a new file is pushed to the GitHub repository. Following this, Netlify fires up and pushes the freshly built website out to the internet.</p>
<p>This site uses the theme <a href="https://github.com/alexandrevicenzi/Flex">Flex</a> as a basis, except a local 'fork' of Flex is retained in the repository such that I can make edit without disrupting other users of Flex.</p>
<p>So there was only 3 files that I needed to edit: <code>pelicanconf.py</code>, <code>requirements.txt</code> and a html file for the theme. <code>pelicanconf.py</code> contains all the instructions to provide to pelican when building the site, <code>requirements.txt</code> contains the list of packages required for TravisCI to use and the template html file is how it is to represented on the web.</p>
<h3 id="update-requirementstxt">Update <code>requirements.txt</code></h3>
<p>First off we add <code>wordsum</code> to the virtual environment for the project and freeze it within <code>requirements.txt</code> with</p>
<table class="table highlighttable table-striped"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>pip install wordsum
pip freeze requirements.txt
</code></pre></div>
</td></tr></tbody></table>
<blockquote>
<p>Since most CI services use Ubuntu as a base, pywin32 is installed be default as a dependancy on wordsum, this can be removed with <code>pip uninstall pywin32</code></p>
</blockquote>
<h3 id="update-pelicanconfpy">Update <code>pelicanconf.py</code></h3>
<p>This file contains the code that will run when <code>pelican content</code> is called upon the folder to build this website. To interface with <code>wordsum</code> we add the code:</p>
<table class="table highlighttable table-striped"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">wordsum</span>

<span class="n">WORD_TICKER</span> <span class="o">=</span> <span class="n">wordsum</span><span class="o">.</span><span class="n">count_words</span><span class="p">(</span><span class="s1">'./content'</span><span class="p">,[</span><span class="s1">'.md'</span><span class="p">,</span><span class="s1">'.ipynb'</span><span class="p">])</span>
<span class="n">WORD_TICKER</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">WORD_TICKER</span><span class="si">:</span><span class="s2">,</span><span class="si">}</span><span class="s2">"</span>
</code></pre></div>
</td></tr></tbody></table>
<p>This creates a variable <code>WORD_TICKER</code> that can be used later on to show the number of words counted across all markdown files &amp; Jupyter notebooks.</p>
<blockquote>
<p>The line <code>WORD_TICKER = f"{WORD_TICKER:,}"</code> adds thousand separators to numbers in Python with f-strings. For example this converts 123456 to 123,456.</p>
</blockquote>
<h3 id="update-basehtml">Update <code>base.html</code></h3>
<p>Now we just need to show our word ticker on the website. In the Flex theme, all pages inherit from a <code>base.html</code> file. To squeeze our new metrics onto the page we add the lines:</p>
<table class="table highlighttable table-striped"><tbody><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><code>{% if WORD_TICKER %}
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Number of Posts: {{ articles|count }}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
<span class="p">&lt;</span><span class="nt">p</span><span class="p">&gt;</span>Number of Words: {{ WORD_TICKER}}<span class="p">&lt;/</span><span class="nt">p</span><span class="p">&gt;</span>
{% endif %}
</code></pre></div>
</td></tr></tbody></table>
<p>First we check if the variable <code>WORD_TICKER</code> is used to ensure we only include the metrics if the variable has been set. Followed by two paragraph markers which will show:</p>
<ol>
<li>How many posts are on the website</li>
<li>How many words are used in all of those posts</li>
</ol></body>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://jackmckew.dev/tag/python.html">python</a>
    </p>
  </div>


  <div class="neighbors">
    <a class="btn float-left" href="https://jackmckew.dev/counting-words-with-python.html" title="Counting Words with Python">
      <i class="fa fa-angle-left"></i>  Previous Post
    </a>
    <a class="btn float-right" href="https://jackmckew.dev/pelican-and-javascript-bouncing-balls-in-canvas.html" title="Pelican and Javascript - Bouncing Balls in Canvas">
       Next Post <i class="fa fa-angle-right"></i>
    </a>
  </div>

  <div class="related-posts">
    <h4> You might enjoy</h4>
    <ul class="related-posts">
      <li><a href="https://jackmckew.dev/differential-privacy.html">Differential Privacy</a></li>
      <li><a href="https://jackmckew.dev/shallow-vs-deep-copy-in-python.html">Shallow vs Deep Copy in Python</a></li>
      <li><a href="https://jackmckew.dev/types-of-averages-means.html">Types of Averages (Means)</a></li>
      <li><a href="https://jackmckew.dev/dataclasses-vs-attrs-vs-pydantic.html">Dataclasses vs Attrs vs Pydantic</a></li>
      <li><a href="https://jackmckew.dev/generators-in-python.html">Generators in Python</a></li>
    </ul>
  </div>

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle ads-responsive"
         data-ad-client="ca-pub-1052275056735196"
         data-ad-slot="1234566"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>

<!-- Disqus -->
<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'jackmckew-dev';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
     Please enable JavaScript to view comments.
</noscript>
<!-- End Disqus -->
</article>

        <footer>
<p>&copy;  </p>
<p> Built with <a href="http://getpelican.com" target="_blank">Pelican</a> using <a href="http://bit.ly/flex-pelican" target="_blank">Flex</a> theme</p>        </footer>
    </main>

<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Jack McKew's Blog ",
  "url" : "https://jackmckew.dev",
  "image": "/jm-photo.jpg",
  "description": ""
}
</script><a href="https://github.com/JackMcKew/jackmckew.dev" class="github-corner" aria-label="View source on Github">
    <svg width="80"
         height="80"
         viewBox="0 0 250 250"
         style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; right: 0;"
         aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor"
              style="transform-origin: 130px 106px;"
              class="octo-arm">
        </path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor"
              class="octo-body">
        </path>
    </svg>
</a>
<style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style>    <script>
        $(document).ready(function() {
            $('#tipue_search_input').tipuesearch();
        });
    </script>
</body>

</html>